# PanSou äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. æœåŠ¡å™¨è¦æ±‚
- CPU: 1æ ¸å¿ƒæˆ–ä»¥ä¸Š
- å†…å­˜: 512MBæˆ–ä»¥ä¸Š  
- å­˜å‚¨: 2GBå¯ç”¨ç©ºé—´
- æ“ä½œç³»ç»Ÿ: Ubuntu 18.04+ / CentOS 7+ / Debian 9+
- ç«¯å£: å¼€æ”¾8080ç«¯å£ï¼ˆæˆ–è‡ªå®šä¹‰ç«¯å£ï¼‰

### 2. å®‰è£…ä¾èµ–
```bash
# Ubuntu/Debian ç³»ç»Ÿ
sudo apt update
sudo apt install -y docker.io docker-compose git

# CentOS ç³»ç»Ÿ  
sudo yum install -y docker docker-compose git
sudo systemctl start docker
sudo systemctl enable docker

# å°†ç”¨æˆ·æ·»åŠ åˆ°dockerç»„ï¼ˆé¿å…æ¯æ¬¡ä½¿ç”¨sudoï¼‰
sudo usermod -aG docker $USER
# é‡æ–°ç™»å½•ç”Ÿæ•ˆ
```

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹æ³•1: ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

1. **å…‹éš†é¡¹ç›®åˆ°æœåŠ¡å™¨**
```bash
git clone https://github.com/æ‚¨çš„ç”¨æˆ·å/pansou.git
cd pansou
```

2. **å¯åŠ¨æœåŠ¡**
```bash
# åå°è¿è¡Œ
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### æ–¹æ³•2: ç›´æ¥ä½¿ç”¨ Docker

1. **æ„å»ºé•œåƒ**
```bash
docker build -t pansou:latest .
```

2. **è¿è¡Œå®¹å™¨**
```bash
docker run -d \
  --name pansou \
  -p 8080:8080 \
  --restart unless-stopped \
  pansou:latest
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç«¯å£é…ç½®
- é»˜è®¤ç«¯å£ï¼š8080
- ä¿®æ”¹ç«¯å£ï¼šç¼–è¾‘ `docker-compose.yml` ä¸­çš„ `ports` é…ç½®
- è®¿é—®åœ°å€ï¼š`http://æ‚¨çš„æœåŠ¡å™¨IP:8080`

### åŸŸåé…ç½®ï¼ˆå¯é€‰ï¼‰
å¦‚æœæ‚¨æœ‰åŸŸåï¼Œå¯ä»¥é…ç½® Nginx åå‘ä»£ç†ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

## ğŸ“ ç»´æŠ¤å‘½ä»¤

```bash
# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker-compose ps

# é‡å¯æœåŠ¡
docker-compose restart

# æ›´æ–°ä»£ç åé‡æ–°éƒ¨ç½²
git pull
docker-compose down
docker-compose up -d --build

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats pansou

# å¤‡ä»½æ•°æ®ï¼ˆå¦‚æœæœ‰ï¼‰
docker exec pansou tar czf /tmp/backup.tar.gz /app/data
docker cp pansou:/tmp/backup.tar.gz ./backup-$(date +%Y%m%d).tar.gz
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **é˜²ç«å¢™é…ç½®**
```bash
# åªå¼€æ”¾å¿…è¦ç«¯å£
sudo ufw allow 22    # SSH
sudo ufw allow 8080  # åº”ç”¨ç«¯å£
sudo ufw enable
```

2. **å®šæœŸæ›´æ–°**
```bash
# å®šæœŸæ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®šæœŸæ›´æ–°åº”ç”¨
git pull && docker-compose up -d --build
```

3. **ç›‘æ§æ—¥å¿—**
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æ—¥å¿—æ–‡ä»¶å¤§å°æ§åˆ¶
echo '{"log-driver": "json-file", "log-opts": {"max-size": "10m", "max-file": "3"}}' | sudo tee /etc/docker/daemon.json
sudo systemctl restart docker
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

1. **å¯ç”¨Gzipå‹ç¼©**ï¼ˆåœ¨Nginxä¸­é…ç½®ï¼‰
2. **è®¾ç½®ç¼“å­˜ç­–ç•¥**
3. **å®šæœŸæ¸…ç†Dockeré•œåƒ**
```bash
docker system prune -f
```

## ğŸ†˜ æ•…éšœæ’é™¤

1. **æ£€æŸ¥å®¹å™¨çŠ¶æ€**
```bash
docker-compose ps
docker-compose logs pansou
```

2. **æ£€æŸ¥ç«¯å£å ç”¨**
```bash
netstat -tlnp | grep 8080
```

3. **é‡å¯æœåŠ¡**
```bash
docker-compose restart
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Docker å’Œ Docker Compose ç‰ˆæœ¬
2. æœåŠ¡å™¨ç«¯å£æ˜¯å¦å¼€æ”¾
3. é˜²ç«å¢™è®¾ç½®
4. åº”ç”¨æ—¥å¿—ä¿¡æ¯
