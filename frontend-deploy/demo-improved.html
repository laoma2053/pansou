<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PanSou</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container results-layout" id="container">
        <main class="main">
            <!-- 搜索头部 - logo和搜索框同一行 -->
            <div class="search-header">
                <div class="logo-section">
                    <h1>PanSou</h1>
                </div>
                <div class="search-input-section">
                    <div class="search-input-wrapper">
                        <input type="text" id="searchInput" placeholder="搜索网盘资源..." value="速度与激情" />
                        <button id="searchBtn" class="search-btn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="search-section">
                <!-- 搜索按钮组 - 结果页时隐藏 -->
                <div class="search-buttons results-hide">
                    <button class="btn" id="searchBtnMain">PanSou 搜索</button>
                    <button class="btn" id="luckyBtn">手气不错</button>
                </div>
                
                <!-- 搜索选项和结果统计 -->
                <div class="search-options-bar">
                    <div class="search-options">
                        <div class="option-group">
                            <label>来源:</label>
                            <select id="sourceType">
                                <option value="all">全部</option>
                                <option value="tg">Telegram</option>
                                <option value="plugin">插件</option>
                            </select>
                        </div>
                        
                        <div class="option-group">
                            <label>
                                <input type="checkbox" id="refreshCache"> 强制刷新
                            </label>
                        </div>
                    </div>
                    
                    <!-- 结果统计 - 只在结果页显示 -->
                    <div class="results-stats results-show">
                        <span id="resultCount" class="result-count">找到约 8 条资源</span>
                    </div>
                </div>
            </div>

            <div id="resultsDiv" class="results">
                <!-- 改进4: 动态标签页，按搜索结果排序 -->
                <div class="result-tabs">
                    <button class="tab-btn active" data-type="list">全部</button>
                    <button class="tab-btn" data-type="baidu">百度网盘(3)</button>
                    <button class="tab-btn" data-type="quark">夸克网盘(2)</button>
                    <button class="tab-btn" data-type="aliyun">阿里云盘(2)</button>
                    <button class="tab-btn" data-type="tianyi">天翼云盘(1)</button>
                </div>
                
                <!-- 详细列表结果 -->
                <div id="listResults" class="tab-content active">
                    <div class="result-item">
                        <div class="result-url">
                            <i class="fab fa-telegram"></i>
                            电影分享频道
                        </div>
                        <a href="https://pan.baidu.com/s/1abcdef123456" class="result-title" target="_blank">速度与激情全集 1-10 4K高清蓝光原盘</a>
                        <div class="result-meta">
                            <span class="result-date">2024-01-15</span>
                        </div>
                        <div class="result-snippet">
                            包含速度与激情系列全部10部电影，4K高清蓝光原盘，画质清晰，音效震撼。适合收藏和观看。
                        </div>
                        <div class="result-netdisk-links">
                            <div class="result-netdisk-item">
                                <a href="https://pan.baidu.com/s/1abcdef123456" class="netdisk-link" target="_blank">
                                    <i class="fas fa-cloud"></i>
                                    百度网盘
                                </a>
                                <span class="password-code" onclick="copyPasswordCode('1234', event)" title="点击复制提取码">1234</span>
                            </div>
                        </div>
                    </div>

                    <div class="result-item">
                        <div class="result-url">
                            <i class="fab fa-telegram"></i>
                            漫威粉丝群
                        </div>
                        <a href="https://pan.baidu.com/s/1xyz789456" class="result-title" target="_blank">复仇者联盟系列合集 漫威电影宇宙</a>
                        <div class="result-meta">
                            <span class="result-date">2024-01-10</span>
                        </div>
                        <div class="result-snippet">
                            漫威电影宇宙复仇者联盟系列，包含所有相关电影，按照时间线整理，方便观看。
                        </div>
                        <div class="result-netdisk-links">
                            <div class="result-netdisk-item">
                                <a href="https://pan.baidu.com/s/1xyz789456" class="netdisk-link" target="_blank">
                                    <i class="fas fa-cloud"></i>
                                    百度网盘
                                </a>
                                <span class="password-code" onclick="copyPasswordCode('abcd', event)" title="点击复制提取码">abcd</span>
                            </div>
                        </div>
                    </div>

                    <div class="result-item">
                        <div class="result-url">
                            <i class="fas fa-globe"></i>
                            高清影视资源
                        </div>
                        <a href="https://www.aliyundrive.com/s/aBC123xYz" class="result-title" target="_blank">热门美剧合集 2024最新更新</a>
                        <div class="result-meta">
                            <span class="result-date">2024-01-12</span>
                        </div>
                        <div class="result-snippet">
                            收录2024年最新热门美剧，包含权力的游戏、绝命毒师、老友记等经典剧集。
                        </div>
                        <div class="result-netdisk-links">
                            <div class="result-netdisk-item">
                                <a href="https://www.aliyundrive.com/s/aBC123xYz" class="netdisk-link" target="_blank">
                                    <i class="fab fa-alipay"></i>
                                    阿里云盘
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="result-item">
                        <div class="result-url">
                            <i class="fab fa-telegram"></i>
                            4K电影收藏
                        </div>
                        <a href="https://pan.quark.cn/s/abc123" class="result-title" target="_blank">科幻电影合集 4K超清版本</a>
                        <div class="result-meta">
                            <span class="result-date">2024-01-11</span>
                        </div>
                        <div class="result-snippet">
                            收录经典科幻电影，包括星际穿越、盗梦空间、银翼杀手等，4K超清画质。
                        </div>
                        <div class="result-netdisk-links">
                            <div class="result-netdisk-item">
                                <a href="https://pan.quark.cn/s/abc123" class="netdisk-link" target="_blank">
                                    <i class="fas fa-atom"></i>
                                    夸克网盘
                                </a>
                            </div>
                            <div class="result-netdisk-item">
                                <a href="https://www.aliyundrive.com/s/xyz456" class="netdisk-link" target="_blank">
                                    <i class="fab fa-alipay"></i>
                                    阿里云盘
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 按类型分组结果 -->
                <div id="mergedResults" class="tab-content">
                    <!-- 百度网盘分组 -->
                    <div class="netdisk-group" data-netdisk-type="baidu">
                        <div class="netdisk-title">
                            <i class="fas fa-cloud"></i>
                            百度网盘
                            <span class="netdisk-count">(3)</span>
                        </div>
                        <div class="netdisk-links">
                            <div class="link-item" onclick="copyToClipboard('https://pan.baidu.com/s/1abcdef123456')">
                                <!-- 改进3: 文件标题放在最上面，加粗字号变大 -->
                                <div class="link-title">速度与激情全集 1-10 4K高清</div>
                                <div class="link-url">https://pan.baidu.com/s/1abcdef123456</div>
                                <div class="link-details">
                                    <!-- 改进3: 提取码改名并可一键复制 -->
                                    <div class="link-password">
                                        <span class="password-label">提取码:</span>
                                        <span class="password-code" onclick="copyPasswordCode('1234', event)" title="点击复制提取码">1234</span>
                                    </div>
                                    <div class="link-date">2024-01-15</div>
                                </div>
                            </div>
                            
                            <div class="link-item" onclick="copyToClipboard('https://pan.baidu.com/s/1xyz789456')">
                                <div class="link-title">复仇者联盟系列合集</div>
                                <div class="link-url">https://pan.baidu.com/s/1xyz789456</div>
                                <div class="link-details">
                                    <div class="link-password">
                                        <span class="password-label">提取码:</span>
                                        <span class="password-code" onclick="copyPasswordCode('abcd', event)" title="点击复制提取码">abcd</span>
                                    </div>
                                    <div class="link-date">2024-01-10</div>
                                </div>
                            </div>
                            
                            <div class="link-item" onclick="copyToClipboard('https://pan.baidu.com/s/1def456789')">
                                <div class="link-title">最新电影合集 2024</div>
                                <div class="link-url">https://pan.baidu.com/s/1def456789</div>
                                <div class="link-details">
                                    <div class="link-password">
                                        <span class="password-label">提取码:</span>
                                        <span class="password-code" onclick="copyPasswordCode('2024', event)" title="点击复制提取码">2024</span>
                                    </div>
                                    <div class="link-date">2024-01-08</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 夸克网盘分组 -->
                    <div class="netdisk-group" data-netdisk-type="quark" style="display: none;">
                        <div class="netdisk-title">
                            <i class="fas fa-atom"></i>
                            夸克网盘
                            <span class="netdisk-count">(2)</span>
                        </div>
                        <div class="netdisk-links">
                            <div class="link-item" onclick="copyToClipboard('https://pan.quark.cn/s/abc123')">
                                <div class="link-title">热门美剧合集 高清无水印</div>
                                <div class="link-url">https://pan.quark.cn/s/abc123</div>
                                <div class="link-details">
                                    <div class="link-date">2024-01-12</div>
                                </div>
                            </div>
                            
                            <div class="link-item" onclick="copyToClipboard('https://pan.quark.cn/s/def456')">
                                <div class="link-title">经典动漫收藏 1080P</div>
                                <div class="link-url">https://pan.quark.cn/s/def456</div>
                                <div class="link-details">
                                    <div class="link-date">2024-01-05</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 阿里云盘分组 -->
                    <div class="netdisk-group" data-netdisk-type="aliyun" style="display: none;">
                        <div class="netdisk-title">
                            <i class="fab fa-alipay"></i>
                            阿里云盘
                            <span class="netdisk-count">(2)</span>
                        </div>
                        <div class="netdisk-links">
                            <div class="link-item" onclick="copyToClipboard('https://www.aliyundrive.com/s/aBC123xYz')">
                                <div class="link-title">科幻电影合集 蓝光版</div>
                                <div class="link-url">https://www.aliyundrive.com/s/aBC123xYz</div>
                                <div class="link-details">
                                    <div class="link-date">2024-01-11</div>
                                </div>
                            </div>
                            
                            <div class="link-item" onclick="copyToClipboard('https://www.aliyundrive.com/s/dEf456GhI')">
                                <div class="link-title">动作片精选集合</div>
                                <div class="link-url">https://www.aliyundrive.com/s/dEf456GhI</div>
                                <div class="link-details">
                                    <div class="link-date">2024-01-09</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 天翼云盘分组 -->
                    <div class="netdisk-group" data-netdisk-type="tianyi" style="display: none;">
                        <div class="netdisk-title">
                            <i class="fas fa-cloud-download-alt"></i>
                            天翼云盘
                            <span class="netdisk-count">(1)</span>
                        </div>
                        <div class="netdisk-links">
                            <div class="link-item" onclick="copyToClipboard('https://cloud.189.cn/t/xyz789')">
                                <div class="link-title">经典电影收藏版</div>
                                <div class="link-url">https://cloud.189.cn/t/xyz789</div>
                                <div class="link-details">
                                    <div class="link-password">
                                        <span class="password-label">提取码:</span>
                                        <span class="password-code" onclick="copyPasswordCode('abc1', event)" title="点击复制提取码">abc1</span>
                                    </div>
                                    <div class="link-date">2024-01-07</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2024 PanSou</p>
            <div class="footer-links">
                <a href="#" onclick="showDemoAlert()">关于</a>
                <a href="https://github.com/fish2018/pansou" target="_blank">GitHub</a>
            </div>
        </footer>
    </div>

    <script>
        // 演示脚本
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const searchBtnMain = document.getElementById('searchBtnMain');
        const luckyBtn = document.getElementById('luckyBtn');

        // 搜索功能演示
        function performSearch() {
            const keyword = searchInput.value.trim();
            if (!keyword) {
                showToast('请输入搜索关键词');
                return;
            }
            showToast(`正在搜索 "${keyword}"...`);
        }

        searchBtn.addEventListener('click', performSearch);
        searchBtnMain.addEventListener('click', performSearch);
        
        luckyBtn.addEventListener('click', function() {
            const keywords = ['电影', '音乐', '软件', '游戏', '小说', '综艺', '动漫', '纪录片'];
            searchInput.value = keywords[Math.floor(Math.random() * keywords.length)];
            performSearch();
        });

        // 输入框回车搜索
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // 标签页切换功能
        function switchTab(type) {
            // 更新按钮状态
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.type === type);
            });
            
            if (type === 'list') {
                // 显示全部结果列表
                document.getElementById('listResults').classList.add('active');
                document.getElementById('mergedResults').classList.remove('active');
            } else {
                // 显示特定网盘类型的结果
                document.getElementById('listResults').classList.remove('active');
                document.getElementById('mergedResults').classList.add('active');
                
                // 隐藏所有分组
                document.querySelectorAll('.netdisk-group').forEach(group => {
                    group.style.display = 'none';
                });
                
                // 只显示选中的网盘类型
                const targetGroup = document.querySelector(`[data-netdisk-type="${type}"]`);
                if (targetGroup) {
                    targetGroup.style.display = 'block';
                }
            }
        }

        // 绑定标签页点击事件
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                switchTab(this.dataset.type);
            });
        });

        // 复制提取码
        function copyPasswordCode(password, event) {
            event.stopPropagation(); // 阻止事件冒泡
            copyToClipboard(password);
            showToast(`提取码 "${password}" 已复制到剪贴板`);
        }

        // 复制到剪贴板
        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                showToast('已复制到剪贴板');
            } catch (error) {
                // 降级方案
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast('已复制到剪贴板');
                } catch (err) {
                    showToast('复制失败，请手动复制');
                }
                document.body.removeChild(textArea);
            }
        }

        // 显示提示消息
        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #1a73e8;
                color: white;
                padding: 12px 20px;
                border-radius: 4px;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                transform: translateX(100%);
                transition: transform 0.3s ease;
                font-size: 14px;
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                }, 300);
            }, 2000);
        }

        function showDemoAlert() {
            alert('这是UI演示版本，展示了所有界面改进效果。');
        }

        // 页面加载完成提示
        window.addEventListener('load', function() {
            showToast('演示界面已加载完成！所有功能都可以点击测试。');
        });
    </script>
    <script src="vercel-mock.js"></script>
</body>
</html>
